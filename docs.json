{
  "project": "vif",
  "version": "0.0.0",
  "generatedAt": "2026-01-18T17:33:12.945Z",
  "sections": [
    {
      "id": "overview",
      "title": "Overview",
      "description": "Screen capture and browser automation for macOS, designed for AI agents",
      "content": "# Overview\n\n**vif** is a screen capture and browser automation toolkit for macOS, designed specifically for AI agents and LLMs.\n\n## What is vif?\n\nvif combines three capabilities:\n\n1. **Screen Capture** - Screenshots, video recording, and GIF creation using native macOS tools\n2. **Browser Automation** - Chrome automation via Chrome DevTools Protocol (CDP)\n3. **Demo Automation** - Visual overlays (cursor, labels, keys) for recording polished demos\n\nEverything is designed to work with AI agents: predictable CLI output, MCP tools for Claude Code, and a Stagehand-style API for programmatic control.\n\n## Key Features\n\n### Screen Capture\n- Screenshot windows, regions, or fullscreen\n- Video recording with optional audio\n- Convert to GIF, optimize for web\n- Take management (versioned screenshots)\n\n### Browser Automation\n- Navigate, click, type, scroll in Chrome\n- Extract structured data from pages\n- Observe DOM elements with accessibility info\n- Stagehand-compatible API (`vif.observe()`, `vif.act()`)\n\n### Demo Recording\n- Animated cursor overlay\n- Keyboard shortcut display\n- Text labels/teleprompter\n- Viewport highlighting\n- Backdrop dimming\n\n### AI Agent Integration\n- MCP server for Claude Code (`vif-mcp`)\n- CLI designed for LLM tool use (`vif`, `vif-ctl`)\n- Scene DSL for declarative automation\n\n## Architecture\n\n```\n┌─────────────────────────────────────────────────────────┐\n│                    Your AI Agent                         │\n│                (Claude Code, etc.)                       │\n└───────────────────────┬─────────────────────────────────┘\n                        │ MCP / CLI\n┌───────────────────────┴─────────────────────────────────┐\n│                      vif                                 │\n├─────────────────┬─────────────────┬─────────────────────┤\n│  Screen Capture │ Browser (CDP)   │   Demo Overlays     │\n│  - screencapture│ - navigate      │   - cursor          │\n│  - ffmpeg       │ - click/type    │   - labels          │\n│  - native APIs  │ - extract       │   - keys            │\n└─────────────────┴─────────────────┴─────────────────────┘\n```\n\n## Quick Links\n\n- [Quickstart](./quickstart.md) - Get started in 5 minutes\n- [Browser Automation](./browser.md) - Chrome automation via CDP\n- [Scene DSL](./scenes.md) - Declarative demo automation\n- [MCP Tools](./mcp.md) - Claude Code integration"
    },
    {
      "id": "quickstart",
      "title": "Quickstart",
      "description": "Get started with vif in 5 minutes",
      "content": "# Quickstart\n\nGet up and running with vif in under 5 minutes.\n\n## Prerequisites\n\n- **macOS** (uses native screencapture, Accessibility API)\n- **Node.js 18+**\n- **Xcode Command Line Tools**: `xcode-select --install`\n- **ffmpeg** (optional, for video processing): `brew install ffmpeg`\n\n### Required Permissions\n\nGrant in **System Settings > Privacy & Security**:\n\n| Permission | Required For |\n|------------|--------------|\n| Screen Recording | Screenshots, video capture |\n| Accessibility | Mouse/keyboard automation |\n\n## Installation\n\n```bash\n# Install via pnpm\npnpm add @arach/vif\n\n# Or globally for CLI access\npnpm add -g @arach/vif\n```\n\n## Screen Capture\n\n```bash\n# Screenshot fullscreen\nvif shot screenshot.png\n\n# Screenshot an app window\nvif shot --app Safari safari.png\n\n# Record video (Ctrl+C to stop)\nvif record demo.mp4\n\n# Convert to GIF\nvif gif demo.mp4 demo.gif --width 600 --fps 15\n```\n\n## Browser Automation\n\nControl Chrome via CDP (Chrome DevTools Protocol):\n\n```typescript\nimport { createVif } from '@arach/vif'\n\nconst vif = createVif()\n\n// Launch Chrome and navigate\nawait vif.launch('https://news.ycombinator.com')\n\n// Find elements on the page\nconst elements = await vif.observe({ format: 'clickable-only' })\nconsole.log(elements)  // [{ selector: \"a.storylink\", text: \"Show HN: ...\" }, ...]\n\n// Click an element\nawait vif.click('a.storylink:first-child')\n\n// Type into an input\nawait vif.type('input[name=\"q\"]', 'search query')\n\n// Extract data\nconst data = await vif.extract({\n  title: 'title',\n  links: 'a.storylink'\n})\n\nawait vif.close()\n```\n\n## Demo Overlays\n\nShow visual overlays for demo recordings:\n\n```bash\n# Start the automation server (required for overlays)\nvif serve\n\n# In another terminal:\nvif-ctl cursor show                     # Show animated cursor\nvif-ctl cursor move 500 300 0.5         # Move with animation\nvif-ctl label show \"Recording demo\"     # Show text label\nvif-ctl keys show cmd shift p           # Show keyboard shortcut\nvif-ctl backdrop on                     # Dim background\nvif-ctl stage clear                     # Clear all overlays\n```\n\n## MCP Server (Claude Code)\n\nConnect vif to Claude Code via MCP:\n\n```bash\nvif-mcp  # Start MCP server\n```\n\nAdd to Claude Code's MCP config:\n```json\n{\n  \"mcpServers\": {\n    \"vif\": {\n      \"command\": \"vif-mcp\"\n    }\n  }\n}\n```\n\nThen ask Claude to use vif tools:\n- \"Take a screenshot of Safari\"\n- \"Navigate Chrome to github.com and click Sign in\"\n- \"Show the cursor at 500, 300\"\n\n## Scene DSL\n\nDefine demo sequences in YAML:\n\n```yaml\nscene:\n  name: My Demo\n  mode: draft\n\nsequence:\n  - wait: 500ms\n  - cursor.show: {}\n  - cursor.moveTo: { x: 500, y: 300 }\n  - cursor.click: {}\n  - label.show: \"Welcome!\"\n  - wait: 2s\n  - stage.clear: {}\n```\n\nRun:\n```bash\nvif play demo.yaml              # Execute scene\nvif play --validate demo.yaml   # Validate only\nvif play --watch demo.yaml      # Re-run on changes\n```\n\n## Next Steps\n\n- [Browser Automation](./browser.md) - Full CDP API reference\n- [Scene DSL](./scenes.md) - Complete scene syntax\n- [MCP Tools](./mcp.md) - All available MCP tools"
    },
    {
      "id": "browser",
      "title": "Browser Automation",
      "description": "Chrome automation via Chrome DevTools Protocol (CDP)",
      "content": "# Browser Automation\n\nvif provides Chrome automation via the Chrome DevTools Protocol (CDP). The API is inspired by Stagehand but runs locally without external AI inference costs.\n\n## Quick Example\n\n```typescript\nimport { createVif } from '@arach/vif'\n\nconst vif = createVif()\nawait vif.launch('https://news.ycombinator.com')\n\n// Find elements on page\nconst { elements } = await vif.observe()\nconsole.log(elements)\n// [{ nodeId: 42, tag: 'a', label: 'Hacker News', text: '...', bounds: {...} }, ...]\n\n// Click an element\nawait vif.click('a.storylink:first-child')\n\n// Type into input\nawait vif.type('input[name=\"q\"]', 'search query')\n\n// Extract data\nconst data = await vif.extract({\n  title: 'title',\n  links: 'a.storylink'\n})\n\nawait vif.close()\n```\n\n## The Vif Class\n\n### Constructor Options\n\n```typescript\ninterface VifOptions {\n  /** Chrome debugging port (default: 9222) */\n  port?: number;\n  /** Run in headless mode */\n  headless?: boolean;\n  /** Additional Chrome flags */\n  chromeFlags?: string[];\n}\n\nconst vif = new Vif({\n  port: 9222,\n  headless: true,\n  chromeFlags: ['--disable-gpu']\n})\n```\n\n### Lifecycle Methods\n\n```typescript\n// Launch Chrome and connect\nawait vif.launch('https://example.com')\n\n// Or connect to existing Chrome\nawait vif.connect()\n\n// Check connection\nvif.isConnected()  // boolean\n\n// Close browser\nawait vif.close()\n```\n\n### Navigation\n\n```typescript\n// Navigate to URL\nawait vif.navigate('https://example.com')\n\n// History navigation\nawait vif.back()\nawait vif.forward()\nawait vif.reload()\n\n// Get current URL\nconst currentUrl = await vif.url()\n```\n\n## Observation (Stagehand-style)\n\nThe `observe()` method returns interactive elements on the page. Unlike Stagehand, vif doesn't call an external LLM - it returns structured data that you (or Claude) can interpret.\n\n```typescript\n// Get all clickable elements\nconst { elements } = await vif.observe()\n\n// Filter by selector\nconst { elements } = await vif.observe({ selector: 'button' })\n\n// Elements include:\ninterface ClickableElement {\n  nodeId: number;      // CDP node ID (use with clickNode)\n  tag: string;         // Element tag name\n  role: string;        // ARIA role\n  label: string;       // Accessible name\n  text: string;        // Text content\n  selector: string;    // CSS selector\n  bounds: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    centerX: number;\n    centerY: number;\n  };\n}\n```\n\n### Accessibility Tree\n\n```typescript\n// Get full accessibility tree\nconst tree = await vif.accessibility()\n\ninterface AccessibilityNode {\n  nodeId: number;\n  role: string;\n  name: string;\n  value?: string;\n  description?: string;\n  children?: AccessibilityNode[];\n}\n```\n\n## Actions\n\n### Click\n\n```typescript\n// Click by CSS selector\nawait vif.click('button.submit')\n\n// Click by node ID (from observe)\nconst { elements } = await vif.observe()\nawait vif.clickNode(elements[0].nodeId)\n\n// Natural language click (fuzzy match)\nawait vif.act('click the submit button')\nawait vif.act('click Login')\nawait vif.act('tap on Sign Up')\n```\n\n### Type\n\n```typescript\n// Type into element\nawait vif.type('input[name=\"email\"]', 'user@example.com')\n\n// With options\nawait vif.type('input[name=\"email\"]', 'user@example.com', {\n  clear: true,    // Clear existing text first\n  delay: 50       // Delay between keystrokes (ms)\n})\n\n// Type into focused element\nawait vif.typeText('Hello world')\n```\n\n### Keyboard\n\n```typescript\n// Press single key\nawait vif.press('Enter')\nawait vif.press('Tab')\nawait vif.press('Escape')\n\n// Keyboard shortcut\nawait vif.press(['Control', 'a'])  // Select all\nawait vif.press(['Meta', 'c'])     // Copy (Cmd+C on Mac)\n```\n\n### Mouse\n\n```typescript\n// Hover over element\nawait vif.hover('button.menu')\n\n// Scroll\nawait vif.scroll('down')\nawait vif.scroll('up', { amount: 500 })\nawait vif.scroll('down', { selector: '.scrollable-container' })\n```\n\n## Data Extraction\n\n```typescript\n// Extract text by selectors\nconst data = await vif.extract({\n  title: 'h1',\n  description: 'meta[name=\"description\"]',\n  links: 'a.nav-link'  // Multiple matches return array\n})\n// { title: 'Page Title', description: '...', links: ['Home', 'About', 'Contact'] }\n\n// Get text of single element\nconst heading = await vif.getText('h1')\n\n// Get attribute value\nconst href = await vif.getAttribute('a.main-link', 'href')\n```\n\n## Screenshots\n\n```typescript\n// Screenshot to temp file\nconst path = await vif.screenshot()\n\n// Save to specific path\nawait vif.screenshot({ path: './screenshot.png' })\n\n// Full page screenshot\nawait vif.screenshot({ fullPage: true, path: './full.png' })\n\n// Element screenshot\nawait vif.screenshot({ selector: '.hero-section', path: './hero.png' })\n\n// Different formats\nawait vif.screenshot({ format: 'jpeg', path: './shot.jpg' })\nawait vif.screenshot({ format: 'webp', path: './shot.webp' })\n```\n\n## Waiting\n\n```typescript\n// Wait for element to appear\nawait vif.waitForSelector('.dynamic-content')\n\n// With timeout\nawait vif.waitForSelector('.modal', 5000)  // 5 seconds\n\n// Wait for navigation\nawait vif.waitForNavigation()\n\n// Fixed delay\nawait vif.wait(1000)  // 1 second\n```\n\n## JavaScript Evaluation\n\n```typescript\n// Execute JS in page context\nconst title = await vif.evaluate('document.title')\n\nconst dimensions = await vif.evaluate(`({\n  width: window.innerWidth,\n  height: window.innerHeight\n})`)\n```\n\n## How It Differs from Stagehand\n\n| Feature | Stagehand | vif |\n|---------|-----------|-----|\n| AI inference | External API (paid) | None (local) |\n| `observe()` | AI interprets instruction | Returns element list |\n| `act()` | AI picks element | Fuzzy text matching |\n| `extract()` | Schema-based + AI | CSS selectors |\n| Use case | AI-autonomous browsing | Claude-assisted automation |\n\n**vif's approach**: Instead of paying for AI inference on every action, vif returns structured data that Claude (already running in Claude Code) can interpret. This is \"Claude-in-the-loop\" automation.\n\n## MCP Tools\n\nThe browser automation is also available as MCP tools:\n\n- `vif_browser_launch` - Launch Chrome\n- `vif_browser_navigate` - Navigate to URL\n- `vif_browser_click` - Click element\n- `vif_browser_type` - Type text\n- `vif_browser_scroll` - Scroll page\n- `vif_browser_extract` - Extract data\n- `vif_browser_press` - Press key\n- `vif_browser_hover` - Hover over element\n- `vif_observe` - Get page elements\n- `vif_click_element` - Click by node ID\n- `vif_screenshot` - Take screenshot\n- `vif_browser_close` - Close browser\n\nSee [MCP Tools](./mcp.md) for full documentation."
    }
  ]
}